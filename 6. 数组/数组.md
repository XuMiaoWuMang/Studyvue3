
# JavaScript 数组常用方法详解

数组是 JavaScript 中最常用的数据结构之一，掌握数组的方法对于编写高效的代码至关重要。本文将详细介绍 JavaScript 中数组的常用方法，包括添加、删除、修改和查询等操作。

## 添加元素

### push()

在数组末尾添加一个或多个元素：

```javascript
const arr = [1, 2, 3, 4];
const len = arr.push(5); // 返回新数组长度
console.log(arr, len);  // 输出: [1, 2, 3, 4, 5] 5
```

特点：
- 可以添加多个元素：`arr.push(5, 6, 7)`
- 返回新数组的长度
- 原数组会被修改

### unshift()

在数组开头添加一个或多个元素：

```javascript
const arr = [1, 2, 3, 4];
const len = arr.unshift(0); // 返回新数组长度
console.log(arr, len);     // 输出: [0, 1, 2, 3, 4] 5
```

特点：
- 可以添加多个元素：`arr.unshift(-1, 0)`
- 返回新数组的长度
- 原数组会被修改

## 删除元素

### pop()

删除数组末尾的元素：

```javascript
const arr1 = [1, 2, 3, 4];
const last = arr1.pop(); // 返回被删除的元素
console.log(arr1, last); // 输出: [1, 2, 3] 4
```

特点：
- 只能删除最后一个元素
- 返回被删除的元素
- 原数组会被修改

### shift()

删除数组开头的元素：

```javascript
const arr1 = [1, 2, 3, 4];
const first = arr1.shift(); // 返回被删除的元素
console.log(arr1, first);   // 输出: [2, 3, 4] 1
```

特点：
- 只能删除第一个元素
- 返回被删除的元素
- 原数组会被修改

## 任意位置操作

### splice()

在任意位置添加或删除元素：

```javascript
const arr2 = [1, 2, 3, 4];

// 删除元素
const deleted = arr2.splice(1, 1); // 从索引1开始删除1个元素
console.log(arr2, deleted);       // 输出: [1, 3, 4] [2]

// 添加元素
const inserted = arr2.splice(1, 0, 2.5); // 从索引1开始删除0个元素，添加2.5
console.log(arr2, inserted);            // 输出: [1, 2.5, 3, 4] []
```

语法：`splice(start, deleteCount, item1, item2, ...)`

参数：
- `start`：开始操作的位置
- `deleteCount`：要删除的元素个数
- `item1, item2, ...`：要添加的元素

特点：
- 可以删除任意位置的元素
- 可以在任意位置添加元素
- 返回被删除的元素组成的数组
- 原数组会被修改

## 查询元素

### includes()

判断数组是否包含某个元素：

```javascript
const arr3 = [1, 2, 3, 4];
console.log(arr3.includes(2));  // 输出: true
console.log(arr3.includes(5));  // 输出: false
```

特点：
- 返回布尔值
- 使用严格相等（===）比较
- 适用于简单类型的数组

### indexOf()

查找元素的索引：

```javascript
const arr3 = [1, 2, 3, 4];
console.log(arr3.indexOf(2));  // 输出: 1
console.log(arr3.indexOf(5));  // 输出: -1
```

特点：
- 返回第一个匹配元素的索引
- 如果不存在则返回 -1
- 使用严格相等（===）比较

### lastIndexOf()

从后向前查找元素的索引：

```javascript
const arr3 = [1, 2, 3, 2, 4];
console.log(arr3.lastIndexOf(2));  // 输出: 3
console.log(arr3.lastIndexOf(5));  // 输出: -1
```

特点：
- 从后向前查找
- 返回最后一个匹配元素的索引
- 如果不存在则返回 -1

## 最佳实践

1. **选择合适的方法**：
   - 需要在末尾添加/删除元素时，使用 `push()`/`pop()`
   - 需要在开头添加/删除元素时，使用 `unshift()`/`shift()`
   - 需要在任意位置操作时，使用 `splice()`
   - 需要检查元素是否存在时，使用 `includes()`

2. **注意副作用**：
   - 大多数数组方法都会修改原数组
   - 如果需要保留原数组，可以先创建副本
   - 使用 `slice()` 方法创建副本：`const copy = arr.slice()`

3. **性能考虑**：
   - `push()` 和 `pop()` 通常比 `shift()` 和 `unshift()` 更快
   - 频繁在数组开头操作时，考虑使用其他数据结构

掌握这些数组方法对于编写高效的 JavaScript 代码至关重要。根据不同的需求选择合适的方法，可以让我们写出更加简洁和高效的代码。